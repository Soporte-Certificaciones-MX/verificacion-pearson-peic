<form id="verificationForm" method="POST" enctype="multipart/form-data">
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_subject" value="Nueva Verificación + PDF - México">
    <input type="text" name="_honey" style="display:none">

    <div class="section-title" style="margin-top:0;">Consideraciones generales: <span class="required">*</span></div>
    <div class="info-text">
        1. Al completar este registro, acepta las políticas de uso y protección de datos.<br>
        2. Validación exclusiva para certificados <b>PEIC</b>.<br>
        3. Esta solicitud es estrictamente <b>institucional</b> en México.
    </div>

    <div class="input-group">
        <label>Nombres completos <span class="required">*</span></label>
        <input type="text" name="Nombres" required>
    </div>
    <div class="input-group">
        <label>Apellidos completos <span class="required">*</span></label>
        <input type="text" name="Apellidos" required>
    </div>
    <div class="input-group">
        <label>Correo Electrónico Institucional <span class="required">*</span></label>
        <input type="email" name="email" required>
    </div>
    <div class="input-group">
        <label>Institución / Entidad que solicita <span class="required">*</span></label>
        <input type="text" name="Institucion" required>
    </div>
    <div class="input-group">
        <label>Adjuntar certificado para revisión (Solo PDF) <span class="required">*</span></label>
        <input type="file" name="attachment" accept=".pdf" required>
    </div>

    <button type="submit" id="submitBtn" class="btn-submit">Enviar para Verificación</button>
</form>

<script>
    const form = document.getElementById('verificationForm');
    const modal = document.getElementById('thankYouModal');
    const btn = document.getElementById('submitBtn');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        btn.disabled = true;
        btn.innerText = "Enviando archivo...";

        const formData = new FormData(form);

        // Cambiamos el endpoint a la versión estándar si el AJAX falla, 
        // pero vamos a intentar que el Fetch maneje el multipart correctamente.
        fetch('https://formsubmit.co/ajax/juliandavidpedrazarozo@gmail.com', {
            method: 'POST',
            body: formData,
            // IMPORTANTE: No pongas 'Content-Type' manualmente, 
            // el navegador lo hace solo al detectar FormData y le pone el boundary necesario.
        })
        .then(response => response.json())
        .then(data => {
            console.log(data);
            modal.style.display = 'flex';
            form.reset();
            btn.disabled = false;
            btn.innerText = "Enviar para Verificación";
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Hubo un error al enviar el PDF. Intente de nuevo.');
            btn.disabled = false;
            btn.innerText = "Enviar para Verificación";
        });
    });

    function closeModal() {
        document.getElementById('thankYouModal').style.display = 'none';
    }
</script>

        function closeModal() {
            modal.style.display = 'none';
        }
    </script>
</body>
</html>

